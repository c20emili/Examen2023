<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>A-Frame</title>
    <!-- A-Frame -->
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <!-- Own script -->
    <script>        
        var waveAmount = 3;
        var unit1={life:5,position:0,type:1,loot:50},unit2={life:10,position:0,type:2,loot:150},unit3={life:25,position:0,type:3,loot:500};
        var waves = [];
        var waveindexnumber = 0;
        var waveTimer;
        var lives = 5;
        var money = 200;//used to buy towers
        var lanes = [[],[],[],[],[]];//the lanes on the gamefield
        // unit = {life,position,type};
        var tower = "";
        var rook = {name:"Rook",health:3,lane:0,position:0,type:1,attack:1,atkSpeed:2,cost:200,note:"Attacks all enemies in it's lane"};
        var bishop = {name:"Bishop",health:3,lane:0,position:0,type:2,attack:2,atkSpeed:1.4,cost:100,note:"Attacks the first enemies in the lanes next to it"};
        var pawn = {name:"Pawn",health:3,lane:0,position:0,type:3,attack:2,atkSpeed:1.2,cost:50,note:"Attacks the first enemy in it's lane"};
        var wall = {name:"Wall",health:15,lane:0,position:0,type:4,attack:0,atkSpeed:0,cost:100,note:"Do not attack but have high health"};
        var towers = [];
        var paused = true;
        var endOflanes = 1001;
        var pattern1 = [2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,2,1,3,];
        var pattern2 = [0,1,2,3,4,0,1,2,3,4,0,1,2,3,4,0,1,2,3,4];
        var patterns = [pattern1,pattern2,pattern1,pattern2];
        var tileSelected = [];
        var frames = 0;
        var data = "";
        var testSerie = 0;
        var attacked = false;
        var lanes3D = [25.5, 22.9, 20.3, 17.7, 15.1];
        var towerPositions3D = [0,-5.5,-10.5,-15.5,-21,-26,-32,-37,-43,-48];
        var sceneEl;
        var stopped = false;
        var fpsMeter;
        var counter=0;
        // -------------------------------------------
        var gameCanvas,c;
        var tileWidth=100;
        var tileHeight=50;
        var tileOffsX=0;
        var tileOffsY=0;
        var tileLean=tileWidth/tileHeight;
        var mx,my;          
        // Current Hover Tile
        var hx=0,hy=0,mx=0,my=0;          
        // Tilemap
        var tiles=[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]];
        
       
        
        function init2DGraphics()
        {  
            gameCanvas = document.getElementById("gameWindow");
            c=gameCanvas.getContext("2d");                                             
        }
        function drawBox(x,y,strokecolor,fillcolor){
            c.save();
            c.translate(x,y);

            c.strokeStyle = strokecolor;
            c.fillStyle = fillcolor;
            c.lineWidth = 1.5;
            
            c.globalAlpha = 0.5;
            c.beginPath();
            c.moveTo(0,0);
            c.lineTo(100,0);
            c.lineTo(100,50);
            c.lineTo(0,50);
            c.closePath();
            
            if(fillcolor!="") {
                c.fill()
            };
            if(strokecolor!="") {
                c.stroke();
            }

            c.restore();            
        }
        function drawUnit(u,lane) {
            c.save();
            switch (u.type) {
                case 1:
                    c.fillStyle = "#00ff00";
                    break;
                case 2:
                    c.fillStyle = "#00ff00";
                    break;
                case 3:
                    c.fillStyle = "#00ff00";
                    break;            
                default:
                    c.fillStyle = "#000000";
                    break;
            }
            
            c.strokeStyle = "black";
            c.lineWidth = 1.5;

            ypos = 50*lane+45;
            c.globalAlpha = 1.0;
            c.beginPath();
            c.rect(u.position+10, ypos,u.life*10,5);
            c.closePath();
            
            c.fill();
            c.stroke();

            c.restore();            
        }    
        function display(){
            c.clearRect(0, 0, 1000, 500);
            for(cy=0;cy<5;cy++){
                for(cx=0;cx<10;cx++){
                    if(tiles[cx][cy]==1){
                        drawBox(tileOffsX+(tileWidth)*cx,tileOffsY+(cy*tileHeight),"#444","blue");
                    }
                    else if(tiles[cx][cy]==2){
                        drawBox(tileOffsX+(tileWidth)*cx,tileOffsY+(cy*tileHeight),"#444","green");
                    }
                    else if(tiles[cx][cy]==3){
                        drawBox(tileOffsX+(tileWidth)*cx,tileOffsY+(cy*tileHeight),"#444","red");
                    }
                    else if(tiles[cx][cy]==4){
                        drawBox(tileOffsX+(tileWidth)*cx,tileOffsY+(cy*tileHeight),"#444","purple");
                    }
                    else if(mx >= tileWidth*cx && mx <= tileWidth*(cx+1) && my >= tileOffsY+(tileHeight*(cy)) && my <= tileOffsY+(tileHeight*(cy+1)) ){
                        drawBox(tileOffsX+(tileWidth)*cx,tileOffsY+(cy*tileHeight),"#444","#222");
                    }
                    else if(tiles[cx][cy]==0){
                        //sdrawBox(tileOffsX+(tileWidth)*cx,tileOffsY+(cy*tileHeight),"#444","white");
                    }
                    if(cx == tileSelected[0] && cy == tileSelected[1]){
                        drawBox(tileOffsX+(tileWidth)*cx,tileOffsY+(cy*tileHeight),"#444","lightgrey");
                    }
                }
            }
            for (let i = 0; i < lanes.length; i++) {
                var laneNr = lanes[i];
                for (let j = 0; j < laneNr.length; j++) {
                    var laneUnit = laneNr[j];
                    drawUnit(laneUnit,i);
                }                
            }
            
        }
        function selectTile(){
            for(cy=0;cy<5;cy++){
                for(cx=0;cx<10;cx++){
                    if(mx >= tileWidth*cx && mx <= tileWidth*(cx+1) && my >= tileOffsY+(tileHeight*(cy)) && my <= tileOffsY+(tileHeight*(cy+1)) ){
                        if (tiles[cx][cy] == 0 && tower != "") {
                            placeTower(tower,cy+1,cx+1);
                        } else if (tiles[cx][cy] != 0) {
                            tileSelected[0] = cx;
                            tileSelected[1] = cy;
                            for (let i = 0; i < towers.length; i++) {
                                if (towers[i].lane == (cy+1) && towers[i].position == (cx+1)) {
                                    updateTowerDisplay(towers[i]);
                                }                                
                            }
                        }
                    }
                }
            }
        }
        //------------------------------------------2d graphics end
        function mouseMove(e,t){        
            var rect = e.target.getBoundingClientRect();
            mx = e.clientX - rect.left; //x position within the element.
            my = e.clientY - rect.top;  //y position within the element.
        }
        
        //-----------------------------------------A-Frame specifik kod
        
        // Components
        AFRAME.registerComponent('lane', {
            schema: {type: 'int', default: 0}
        });
        AFRAME.registerComponent('num', {
            schema: {type: 'int', default: 0}
        });
        AFRAME.registerComponent('lanenum', {
            schema: {type: 'int', default: 0}
        });
        AFRAME.registerComponent('move', {
            schema:{default:false},
            tick: function (time, timeDelta) {   
                if (this.data) {
                    if (!attacked) {
                        if (lanes[this.el.getAttribute('lane')][this.el.getAttribute('lanenum')]) {
                            this.el.setAttribute('position',{
                                x: (-48.5 + 0.052 * lanes[this.el.getAttribute('lane')][this.el.getAttribute('lanenum')].position),
                                y: lanes3D[this.el.getAttribute('lane')],
                                z:-30
                            })  
                        }                        
                    }
                    if (this.el.getAttribute('position').x >= (-48.5 + 0.052 * 1000)) {
                        this.el.parentNode.removeChild(this.el);
                    }
                }
            }
        });
        AFRAME.registerComponent('grow', {
            schema:{default:false},
            tick: function (time, timeDelta) {
                if (this.data) {
                    if (!attacked) {
                        if (lanes[this.el.getAttribute('lane')][this.el.getAttribute('lanenum')]) {
                            this.el.setAttribute('geometry',{
                                height: (0.5+0.001*lanes[this.el.getAttribute('lane')][this.el.getAttribute('lanenum')].position%200),
                                width: (0.5+0.001*lanes[this.el.getAttribute('lane')][this.el.getAttribute('lanenum')].position%200),
                                depth: (0.5+0.001*lanes[this.el.getAttribute('lane')][this.el.getAttribute('lanenum')].position%200)
                            });
                        }
                    }
                }
            }
        });
        AFRAME.registerComponent('rotate', {
            schema:{default:false},
            tick: function (time, timeDelta) {      
                if (this.data) {
                    if (!attacked) {
                        if (lanes[this.el.getAttribute('lane')][this.el.getAttribute('lanenum')]) {
                            this.el.setAttribute('rotation',{
                                x: lanes[this.el.getAttribute('lane')][this.el.getAttribute('lanenum')].position%360, 
                                y: lanes[this.el.getAttribute('lane')][this.el.getAttribute('lanenum')].position%360,
                                z: lanes[this.el.getAttribute('lane')][this.el.getAttribute('lanenum')].position%360,
                            });
                        }
                    }
                }
            }
        });
        AFRAME.registerComponent('hpmulti', {
            schema: {default: 1/3}
        });
        AFRAME.registerComponent('entitytype', {
            schema: {type: 'string', default: 'Unit'},
        });
        AFRAME.registerComponent('towertype', {
            schema: {type: 'int', default: 1},
            tick: function (time, timeDelta) {
                switch (this.data) {
                    case 1:
                        this.el.setAttribute('material',{color: 'blue'});
                        break;
                    case 2:
                        this.el.setAttribute('material',{color: 'green'});
                        break;
                    case 3:
                        this.el.setAttribute('material',{color: 'red'});                        
                        break;
                    case 4:
                        this.el.setAttribute('material',{color: 'purple'});
                        break;                
                    default:
                        this.el.setAttribute('material',{color: 'white'});
                        break;
                }
            }
        });
        AFRAME.registerComponent('hp', {
            schema: {type: 'int', default: 5},
            tick: function (time, timeDelta) {
                if (this.el.getAttribute('entitytype') == 'tower') {
                    this.el.setAttribute('geometry',{height: this.data * this.el.getAttribute('hpmulti')})
                }
                if (this.data <= 0) {
                    this.el.parentNode.removeChild(this.el);
                }
            }
        });
        AFRAME.registerComponent('framecounter', {
            tick: function (time, timeDelta) {
                if (!stopped) {
                    if (!paused) {
                        frames++;
                    }
                }
            }
        });
        //------------------------------------------------------
        function restartGame(){
            sceneEl = document.querySelector('a-scene');
            paused = true;
            waves = [];
            waveindexnumber=0;
            towers = [];
            lanes = [[],[],[],[],[]];
            var c = 0;
            for (let i = 0; i < 3; i++) {
                waves[i]=[];
                count=0;
                for (let index = 0; index < 10; index++) {
                    c++;
                    waves[i].push({spawnTime:count*50,lane:patterns[i][index],unit:{life:5,position:0,type:1,loot:50,num:c}})
                    count++;
                }       
            }
            lives = 5;
            money = 200;
            document.getElementById("lifeCounter").innerHTML = "lives: " + lives;
            document.getElementById("moneyCounter").innerHTML = "Cash: " + money;
        }
        function spawnUnit(lane,unit){
            lanes[lane].push(unit);
            counter++;
            var enemytempVar = document.createElement("a-entity");
            enemytempVar.setAttribute("id","lane"+lane+"unit"+counter);
            enemytempVar.setAttribute("lane",lane);
            enemytempVar.setAttribute("lanenum",lanes[lane].length-1);
            enemytempVar.setAttribute("num",counter);
            enemytempVar.setAttribute("hp",unit.life);
            enemytempVar.setAttribute("geometry",{primitive: "box"});
            enemytempVar.setAttribute("material",{color: "#4CD3D9"});
            enemytempVar.setAttribute("move",true);
            enemytempVar.setAttribute("grow",true);
            enemytempVar.setAttribute("rotate",true);
            sceneEl.appendChild(enemytempVar);   
        }

        function placeTower(tower,l,pos){
            if (money>=tower.cost) {
                tiles[pos-1][l-1] = tower.type;
                var t = {name:tower.name,health:tower.health,lane:l,position:pos,type:tower.type,attack:tower.attack,atkSpeed:tower.atkSpeed,cost:tower.cost,note:tower.note};
                towers.push(t);
                money=money - tower.cost;
                var tempVar =  document.createElement("a-entity");
                tempVar.setAttribute("id","lane"+t.lane+"tower"+t.position);
                tempVar.setAttribute("geometry","primitive:cylinder; height:0.2;");
                tempVar.setAttribute("position",{
                    x:towerPositions3D[10-t.position],
                    y:lanes3D[t.lane-1],
                    z: -30
                });
                tempVar.setAttribute("rotation","90 0 0");
                tempVar.setAttribute('hp',t.health);
                tempVar.setAttribute('towertype',t.type);
                tempVar.setAttribute('entitytype','base');
                sceneEl.appendChild(tempVar);
                var smalltempVar =  document.createElement("a-entity");
                smalltempVar.setAttribute("id","lane"+t.lane+"towerTop"+t.position);
                smalltempVar.setAttribute("geometry","primitive:cylinder; radius:0.5; height:1;");
                smalltempVar.setAttribute("position",{
                    x:towerPositions3D[10-t.position],
                    y:lanes3D[t.lane-1],
                    z: -29.5
                });
                smalltempVar.setAttribute("rotation","90 0 0");
                smalltempVar.setAttribute('hp',t.health);
                smalltempVar.setAttribute('towertype',t.type);
                smalltempVar.setAttribute('entitytype','tower');
                smalltempVar.setAttribute('hpmulti',1/t.health);
                sceneEl.appendChild(smalltempVar);
            }
        }

        function selectTower(t){
            tower=t;
            updateTowerDisplay(tower);
        }
        function updateTowerDisplay(t){
            document.getElementById("selectedTowerName").innerHTML = t.name;
            document.getElementById("selectedTowerHealth").innerHTML = t.health;
            document.getElementById("selectedTowerAttack").innerHTML = t.attack;
            document.getElementById("selectedTowerAttackSpeed").innerHTML = t.atkSpeed;
            document.getElementById("selectedTowerCost").innerHTML = t.cost;
            document.getElementById("selectedTowerInfo").innerHTML = t.note; 
        }

        setInterval(() => {
            document.getElementById("lifeCounter").innerHTML = "lives: " + lives;
            document.getElementById("moneyCounter").innerHTML = "Cash: " + money;
            gameLoop();
        }, 5);

        function nextWave(){
            waveindexnumber++;
            if (!fpsMeter) {
                fpsMeter = setInterval(() => {
                    var timeStamp = new Date;
                    testSerie++;
                    data += testSerie + "," + frames + ",\n";
                    frames = 0;
                }, 1000);
            }
            if (waveindexnumber>waveAmount) {
                console.log(data);
                var anchor = document.createElement('a');  
                anchor.href = 'data:text/csv;charset=utf-8,' + encodeURI(data);  
                anchor.target = '_blank';
                anchor.download = 'ATestData.csv';  
                anchor.click();           
            }
            waveTimer=0;
            paused=false;
            document.getElementById("nextWaveButton").setAttribute("disabled",true);
        }

        function gameLoop(){
            display();
            if (!paused && waveindexnumber <= waveAmount) {
                activeWave(waves[waveindexnumber-1]);     
            }
        }

        function activeWave(wave){
            if (!stopped) {
                //enemy spawn
                for (let i = 0; i < wave.length; i++) {
                    if (wave[i].spawnTime == waveTimer) {
                        spawnUnit(wave[i].lane,wave[i].unit);
                    }
                }
                waveTimer++;
                //Enemy unit movement
                for (let i = 0; i < lanes.length; i++) {                
                    var dead=[];
                    var deathCounter = 0;
                    for (let j = 0; j < lanes[i].length; j++) {
                        attacked=false;
                        for (let k = 0; k < towers.length; k++) {
                            if (lanes[i][j].position >= (towers[k].position-1)*100 && i == towers[k].lane-1) {
                                attacked=true;
                                if (waveTimer%200 == 0) {
                                    towers[k].health--;
                                    document.getElementById("lane"+towers[k].lane+"towerTop"+towers[k].position).setAttribute('hp',towers[k].health);
                                    document.getElementById("lane"+towers[k].lane+"tower"+towers[k].position).setAttribute('hp',towers[k].health);
                                    if (towers[k].health <= 0) {
                                        tiles[towers[k].position-1][towers[k].lane-1] = 0;
                                        //document.getElementById("scene").removeChild(document.getElementById("lane"+towers[k].lane+"towerTop"+towers[k].position));
                                        //document.getElementById("scene").removeChild(document.getElementById("lane"+towers[k].lane+"tower"+towers[k].position));
                                        towers.splice(k,1);
                                    }
                                }
                            }
                        }
                        if (!attacked){
                            lanes[i][j].position++;
                            if (lanes[i][j].position > endOflanes) {
                                lives--;
                                document.getElementById("lifeCounter").innerHTML = lives;
                                dead.push([i,j]);
                                deathCounter++;
                            }
                        }
                    }
                    if (deathCounter > 0) {
                        for (let j = 1; j < lanes[i].length; j++) {
                            if (document.getElementById("lane" + i + "unit" + lanes[i][j].num) != null) {
                                document.getElementById("lane" + i + "unit" + lanes[i][j].num).setAttribute("lanenum",(j - deathCounter));
                            }
                        }  
                    }
                    for (let j = 0; j < dead.length; j++) {
                        //document.getElementById("scene").removeChild(document.getElementById("lane"+dead[j][0]+"unit"+dead[j][1])); //remove 3d object
                        lanes[dead[j][0]].splice(dead[j][1],1);
                    }
                    
                }
                //tower attacks
                for (let i = 0; i < towers.length; i++) {
                    var l;
                    var t = towers[i];
                    if (t.type==1) {//rook
                        var dead=[];
                        l = t.lane-1;
                        for (let j = 0; j < lanes[l].length; j++) {
                            document.getElementById("lane" + l + "unit" + lanes[l][j].num).setAttribute("lanenum",j);
                            if (waveTimer%(t.atkSpeed*100) == 0) {
                                lanes[l][j].life = lanes[l][j].life - t.attack;
                                document.getElementById("lane" + l + "unit" + lanes[l][j].num).setAttribute("hp",lanes[l][j].life);
                            }
                            if(lanes[l][j].life <= 0) {
                                dead.push(j);
                                for (let k = j; k < lanes[l].length; k++) {
                                    if (document.getElementById("lane" + l + "unit" + lanes[l][k].num) != null) {
                                        document.getElementById("lane" + l + "unit" + lanes[l][k].num).setAttribute("lanenum",(k - 1));
                                    }
                                }
                            }
                        }
                        for (let j = 0; j < dead.length; j++) {
                            money = money+lanes[l][dead[j]].loot;
                            //document.getElementById("scene").removeChild(document.getElementById("lane"+(t.lane-1)+"unit"+dead[j])); //remove 3d object 
                            lanes[l].splice(dead[j],1);                    
                        }
                    } else if (t.type==2) {//bishop
                        l = t.lane;
                        if (lanes[l]) {
                            if (lanes[l].length >= 1) {
                                for (let j = 0; j < lanes[l].length; j++) {
                                    document.getElementById("lane" + l + "unit" + lanes[l][j].num).setAttribute("lanenum",j);
                                }
                                if (waveTimer%(t.atkSpeed*100) == 0) {
                                    lanes[l][0].life = lanes[l][0].life - t.attack;
                                    document.getElementById("lane" + l + "unit" + lanes[l][0].num).setAttribute("hp", lanes[l][0].life);
                                }
                                if (lanes[l][0].life <= 0) {
                                    money = money+lanes[l][0].loot;
                                    for (let k = 1; k < lanes[l].length; k++) {
                                        if (document.getElementById("lane" + l + "unit" + lanes[l][k].num) != null) {
                                            document.getElementById("lane" + l + "unit" + lanes[l][k].num).setAttribute("lanenum",(k - 1));
                                        }
                                    }
                                    //document.getElementById("scene").removeChild(document.getElementById("lane"+(t.lane)+"unit"+0)); //remove 3d object 
                                    lanes[l].shift();
                                }
                            }
                        }
                        l = t.lane-2;
                        if (lanes[l]) {
                            if (lanes[l].length >= 1) {   
                                for (let j = 0; j < lanes[l].length; j++) {
                                    document.getElementById("lane" + l + "unit" + lanes[l][j].num).setAttribute("lanenum",j);
                                }                         
                                if (waveTimer%(t.atkSpeed*100) == 0) {
                                    lanes[t.lane-2][0].life = lanes[l][0].life - t.attack;
                                    document.getElementById("lane" + l + "unit" + lanes[l][0].num).setAttribute("hp", lanes[l][0].life);
                                }
                                if (lanes[l][0].life <= 0) {
                                    money = money+lanes[l][0].loot;
                                    for (let k = 1; k < lanes[l].length; k++) {
                                        if (document.getElementById("lane" + l + "unit" + lanes[l][k].num) != null) {
                                            document.getElementById("lane" + l + "unit" + lanes[l][k].num).setAttribute("lanenum",(k - 1));
                                        }
                                    }
                                    //document.getElementById("scene").removeChild(document.getElementById("lane"+(t.lane-2)+"unit"+0)); //remove 3d object 
                                    lanes[l].shift();
                                }
                            }   
                        }
                                            
                    } else if (t.type==3) {//pawn
                        l = t.lane-1;
                        if (lanes[l].length >= 1) {
                            for (let j = 0; j < lanes[l].length; j++) {
                                document.getElementById("lane" + l + "unit" + lanes[l][j].num).setAttribute("lanenum",j);
                            }
                            if (waveTimer%(t.atkSpeed*100) == 0) {
                                lanes[l][0].life = lanes[l][0].life - t.attack;
                                document.getElementById("lane" + l + "unit" + lanes[l][0].num).setAttribute("hp", lanes[l][0].life);
                            }
                            if (lanes[l][0].life <= 0) {
                                money = money+lanes[l][0].loot;
                                for (let k = 1; k < lanes[l].length; k++) {
                                    console.log(k-1)
                                    if (document.getElementById("lane" + l + "unit" + lanes[l][k].num) != null) {
                                    console.log(k-1)
                                        document.getElementById("lane" + l + "unit" + lanes[l][k].num).setAttribute("lanenum",(k - 1));
                                    }
                                }
                                //document.getElementById("scene").removeChild(document.getElementById("lane"+(t.lane-1)+"unit"+0)); //remove 3d object                            
                                lanes[l].shift();
                            }
                        }               
                    }                
                }
                //lose condition
                if (lives<=0) {
                    if (confirm("Play again?")) {
                        restartGame();
                    }
                }
                //end of wave condition
                
                if (wave[wave.length-1].spawnTime  < waveTimer && lanes[0].length == 0 && lanes[1].length == 0 && lanes[2].length == 0 && lanes[3].length == 0 && lanes[4].length == 0) {
                    paused=true;
                    clearInterval(fpsMeter);
                    fpsMeter = null;
                    frames = 0;
                    document.getElementById("nextWaveButton").removeAttribute("disabled");
                    for (let index = 0; index < towers.length; index++) {
                        var t = towers[index];                 
                    }
                }
            }
        }
        function toggle(p) {
            return !p;
        }
        
        document.addEventListener('keydown', (e) => {
            if (e.key.toLowerCase() === 'p') {
                event.preventDefault();
                stopped = toggle(stopped);
            }
	    });
    </script>
    <style>        
        #gameWindow{
            position: absolute;
            top: 0;
            left: 0;
            opacity: 50%;
        }
        #protection{            
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
        #lifeCounter{
            position: absolute;
            top: 250px;
            left: 10px;
        }
        #moneyCounter{
            position: absolute;
            top: 250px;
            left: 100px;
        }
        #buttons{
            position: absolute;
            top: 290px;
            left: 0vw;

        }
        #infoDisplay{
            height: 250px;
            position: absolute;
            top: 0;
            left: 1020px;
            right: 0;
            font-size: 20px;
        }
    </style>
    <script>
        /*
        var entityEl = document.createElement('a-entity');
        entityEl.setAttribute('do-something-once-loaded', '');
        sceneEl.appendChild(entityEl);*/

    </script>
</head>
<body onload="restartGame();init2DGraphics();">
    <div>
        <a-scene id="scene" framecounter></a-scene>
        <div id="protection"></div>
        <canvas id="gameWindow" width="1000" height="250" onmousemove="mouseMove(event,this);" onmousedown="selectTile();"></canvas>
    </div>
        <h3 id="lifeCounter"></h3>
        <h3 id="moneyCounter"></h3>
    <div id="buttons">
        <button onclick="selectTower(rook)">Select Rook</button>
        <button onclick="selectTower(bishop)">Select Bishop</button>
        <button onclick="selectTower(pawn)">Select Pawn</button>
        <button onclick="selectTower(wall)">Select Wall</button>
        <button id="nextWaveButton" onclick="nextWave()">Next wave</button>
    </div>
    <div id="infoDisplay">
        <table>
            <th id="selectedTowerName">None selected</th>
            <tr>
                <td>Health:</td>
                <td id="selectedTowerHealth">0</td>
            </tr>
            <tr>
                <td>Attack:</td>
                <td id="selectedTowerAttack">0</td>
            </tr>
            <tr>
                <td>Attack speed:</td>
                <td id="selectedTowerAttackSpeed">0</td>
            </tr>
            <tr>
                <td>Info:</td>
                <td id="selectedTowerInfo">none</td>
            </tr>
            <tr>
                <td>Cost:</td>
                <td id="selectedTowerCost">0</td>
            </tr>
        </table>
    </div>
    <script>
        /*
        var lanes3D = [25.5, 22.9, 20.3, 17.7, 15.1];
        var towerPositions3D = [0,-5.5,-10.5,-15.5,-21,-26,-32,-37,-43,-48];
        const scene = document.getElementById("scene");*/
        /*setInterval(() => {
            if (!stopped) {
                if (!paused) {
                    frames++;
                }
                */
                /*
                for (let i = 0; i < towers.length; i++) {
                    var t = towers[i];
                    if (!document.getElementById("lane"+t.lane+"tower"+t.position)) {
                        const tempVar =  document.createElement("a-entity");
                        tempVar.setAttribute("id","lane"+t.lane+"tower"+t.position);
                        tempVar.setAttribute("geometry","primitive:cylinder; height:0.2;");
                        tempVar.setAttribute("position",towerPositions3D[10-t.position]+" "+lanes3D[t.lane-1]+" -30");
                        tempVar.setAttribute("rotation","90 0 0");
                        switch (t.type) {
                            case 1:
                                tempVar.setAttribute("material","color: lightblue");                    
                                break;
                            case 2:
                                tempVar.setAttribute("material","color: lightgreen");                     
                                break;
                            case 3:
                                tempVar.setAttribute("material","color: pink");                     
                                break;
                            case 4:
                                tempVar.setAttribute("material","color: cerise");                     
                                break;
                            default:
                                break;
                        }
                        scene.appendChild(tempVar);
                        const smalltempVar =  document.createElement("a-entity");
                        smalltempVar.setAttribute("id","lane"+t.lane+"towerTop"+t.position);
                        smalltempVar.setAttribute("geometry","primitive:cylinder; radius:0.5; height:1;");
                        smalltempVar.setAttribute("position",towerPositions3D[10-t.position]+" "+lanes3D[t.lane-1]+" -29.5");
                        smalltempVar.setAttribute("rotation","90 0 0");
                        switch (t.type) {
                            case 1:
                                smalltempVar.setAttribute("material","color: blue");                    
                                break;
                            case 2:
                                smalltempVar.setAttribute("material","color: green");                     
                                break;
                            case 3:
                                smalltempVar.setAttribute("material","color: red");                     
                                break;
                            case 4:
                                smalltempVar.setAttribute("material","color: purple");
                                smalltempVar.setAttribute("geometry","primitive:cylinder; radius:0.5; height:"+t.health*0.5+";");
                                break;
                            default:
                                break;
                        }
                        scene.appendChild(smalltempVar);                      
                    }
                    else{
                        var healthMultiplier;
                        switch (t.type) {
                            case 4:
                                healthMultiplier=1/25;
                                break;
                            default:
                                healthMultiplier=1/3;
                                break;
                        }
                        
                        document.getElementById("lane"+t.lane+"towerTop"+t.position).setAttribute("geometry","primitive:cylinder; radius:0.5; height:"+t.health*healthMultiplier+";");
                    }   
                }
                */
                /*
                for (let i = 0; i < lanes.length; i++) {
                    for (let j = 0; j < lanes[i].length; j++) {
                        if (document.getElementById("lane"+i+"unit"+j)) {
                            var enemytempVar = document.getElementById("lane"+i+"unit"+j);
                            var pos = (-48.5+0.052*lanes[i][j].position);
                            enemytempVar.setAttribute("geometry","primitive:box; height:"+(0.5+0.001*lanes[i][j].position%200)+"; width:"+(0.5+0.001*lanes[i][j].position%200)+"; depth:"+(0.5+0.001*lanes[i][j].position%200)+";");
                            enemytempVar.setAttribute("position",pos + " " + lanes3D[i] + " -30");
                            enemytempVar.setAttribute("rotation",(lanes[i][j].position%360) + " " + (lanes[i][j].position%360) + " " + (lanes[i][j].position%360));  
                        }
                        else{
                            const enemytempVar = document.createElement("a-entity");
                            enemytempVar.setAttribute("id","lane"+i+"unit"+j);
                            enemytempVar.setAttribute("geometry","primitive:box;");
                            enemytempVar.setAttribute("material","color: #4CD3D9");
                            scene.appendChild(enemytempVar);  
                        }
                        if(j == lanes[i].length - 1 && document.getElementById("lane"+i+"unit"+(j+1))) {
                            scene.removeChild(document.getElementById("lane"+i+"unit"+(j+1)));
                        }   
                    }
                }
                */
                /*               
            }
        }, 1000/60);*/
        /*for (let i = 0; i < 5; i++) {
            for (let j = 0; j < 10; j++) {                
                const tempVar =  document.createElement("a-entity");
                tempVar.setAttribute("geometry","primitive:box; width:1.5; height:1.5; depth:1.5;");
                tempVar.setAttribute("position",towerPositions3D[j]+" "+lanes3D[i]+" -30");
                tempVar.setAttribute("rotation","0 0 0");
                tempVar.setAttribute("material","color: #EF2D5E");
                scene.appendChild(tempVar);                
            }            
        }*/
    </script>
</body>
</html>